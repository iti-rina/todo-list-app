# ADR 4: Использование createEntityAdapter

### Контекст

Для упрощения работы с состоянием в Redux Toolkit (RTK) предлагается встроенная утилита **createEntityAdapter**. Эта утилита автоматически решает многие задачи по управлению коллекциями сущностей и поддержанию их состояния в нормализованной форме.

### Решение

Я решила использовать **createEntityAdapter** из Redux Toolkit для работы с коллекциями сущностей в текущем проекте.

### Причины выбора createEntityAdapter

1. **Упрощение работы с коллекциями сущностей**
   - **createEntityAdapter** значительно упрощает управление состоянием коллекций в Redux. Он автоматически нормализует данные, используя ключи (`id`), и предоставляет удобные методы для добавления, обновления, удаления и сортировки сущностей.
   - Это избавляет от необходимости вручную писать код для работы с массивами сущностей, что делает код проще, легче поддерживаемым и менее подверженным ошибкам.

2. **Встроенные CRUD-операции**
   - **createEntityAdapter** предоставляет удобные методы для выполнения типичных операций над сущностями:
     - `addOne`, `addMany` — добавление одной или нескольких сущностей.
     - `removeOne`, `removeMany`, `removeAll` — удаление одной или нескольких сущностей.
     - `updateOne`, `updateMany` — обновление сущностей по идентификатору.
     - Эти методы значительно сокращают количество кода, связанного с редактированием состояния.

3. **Селекторы из коробки**
   - Вместе с адаптером **createEntityAdapter** предоставляет автоматически создаваемые селекторы, такие как:
     - `selectById` — для выборки сущности по `id`.
     - `selectAll` — для получения всех сущностей.
     - `selectIds` — для получения всех идентификаторов сущностей.
   - Эти селекторы позволяют легко управлять отображением данных в компонентах, делая код Redux более декларативным.

4. **Повышение читаемости и поддерживаемости кода**
   - Код, использующий **createEntityAdapter**, становится более декларативным и легко понимаемым. Структура состояния и логика обновления становятся очевидными, что повышает читаемость и снижает вероятность появления ошибок.
   - Это особенно важно в больших проектах с множеством сущностей и сложными операциями над ними.

### Вывод

Использование **createEntityAdapter** значительно упрощает управление коллекциями сущностей, улучшает производительность и читаемость кода. Адаптер предоставляет встроенные методы для типичных операций, поддерживает нормализацию состояния и интеграцию с асинхронными экшенами. Это делает его идеальным инструментом для проекта.